<!DOCTYPE html>
<html>
<head>
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1.0" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Constest - Controle de Eventos de Submissão</title>
<link rel="stylesheet"
	href="https://fonts.googleapis.com/icon?family=Material+Icons" />
<!-- CSS-->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet" />
<link
	th:href="@{/webjars/materialize/0.97.6/dist/css/materialize.min.css}"
	type="text/css" rel="stylesheet" media="screen,projection" />
<link th:href="@{/css/style.css}" type="text/css" rel="stylesheet"
	media="screen,projection" />
	<!-- recursos para paginação  -->
	<link th:href="@{/css/jPages.css}" type="text/css" rel="stylesheet" media="screen,projection" />
</head>
<body>
	<div th:include="fragments/header :: header"></div>
	<div class="container page">
		<br />
		<div class="row">
			<h1 th:text="${evento.nome}"></h1>
			<h2>Lista de Artigos para Revisão</h2>
			<div>
				<div id="success_area" class="row chip green white-text" th:if="${trabalhoRevisado}">
				<span th:text="${trabalhoRevisado}"></span><i class="material-icons">close</i>
				</div>
				<div id="error_area" class="row chip red white-text" th:if="${trabalhoInexistenteError}">
				<span th:text="${trabalhoInexistenteError}"></span><i class="material-icons">close</i>
				</div>
				<div id="error_area" class="row chip red white-text" th:if="${eventoInexistenteError}">
				<span th:text="${eventoInexistenteError}"></span><i class="material-icons">close</i>
				</div>
			</div>
			<div th:unless="${#lists.isEmpty(trabalhos)}" class="row holder center"></div>
			<div id="itemContainer" class="row" th:switch="${#lists.isEmpty(trabalhos)}">
				<div class="row" th:case="true">
								<h4 class="card-title">Nenhum artigo para revisar até o momento.</h4>
				</div>
				<div class="row" th:case="false" >
					<div class="card horizontal" th:each="trabalho : ${trabalhos}">
						<div class="card-stacked">
							<div class="card-content">
								<span class="card-title" th:text="${trabalho.titulo}"></span>
								<div th:include="fragments/listar_participacoes :: listar('Revisor(es):', ${trabalho.revisores})"></div>
								<h6 th:text="'Trilha: ' + ${trabalho.trilha.nome}"></h6>
							</div>
							<div class="card-action" th:switch="${#lists.contains(trabalhosRevisados, trabalho.id)}">
								<a th:case='false' th:href="@{'/revisor/' + ${evento.id} + '/' + ${trabalho.id} + '/revisar'}"
									class="btn white-text waves-effect waves-light btn-large">REVISAR</a>
								<a th:case='true' class="btn white-text waves-effect waves-light btn-large light-green darken-2" th:disabled="${true}">REVISADO</a>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div th:unless="${#lists.isEmpty(trabalhos)}" class="row holder center"></div>
			
		</div>
	</div>
	<footer class="page-footer purple darken-4">
		<div class="footer-copyright">
			<div class="container">
				<a href="http://www.npi.quixada.ufc.br" class="white-text">Desenvolvido
					por NPI - Núcleo de Práticas em Informática</a>
			</div>
		</div>
	</footer>
	<script type="text/javascript"
		th:src="@{/webjars/jquery/2.2.4/dist/jquery.min.js}"></script>
	<script type="text/javascript"
		th:src="@{/webjars/materialize/0.97.6/dist/js/materialize.min.js}"></script>
	<script type="text/javascript" th:src="@{/js/jPages.min.js}"></script>
	<script type="text/javascript">
		$(document)
				.ready(
						function() {
							//Inicialização dos elementos no JS
							//Parallax BG
							$('.parallax').parallax();

							//sideNav
							$(".button-collapse").sideNav();

							//Tooltips
							$('.tooltipped').tooltip({
								delay : 50
							});

							//select_initializer
							$('select').material_select();

							//datepicker
							$('.datepicker').pickadate(
									{
										selectMonths : true, // Creates a dropdown to control month
										selectYears : 15, // Creates a dropdown of 15 years to control year
										//Persnonalizando nomes dos meses do ano
										monthsFull : [ 'Janeiro', 'Fevereiro',
												'Março', 'Abril', 'Maio',
												'Junho', 'Julho', 'Agosto',
												'Setembro', 'Outubro',
												'Novembro', 'Dezembro' ],
										//Persnonalizando nomes dos dias da semana
										weekdaysFull : [ 'Domingo', 'Segunda',
												'Terça', 'Quarta', 'Quinta',
												'Sexta', 'Sábado' ],
										weekdaysShort : [ 'Dom', 'Seg', 'Ter',
												'Qua', 'Qui', 'Sex', 'Sab' ],
										weekdaysLetter : [ 'D', 'S', 'T', 'Q',
												'Q', 'S', 'S' ],
										today : 'Hoje',
										clear : 'Limpar',
										close : 'Fechar'
									});

							//Trata as datas na tela org_editar_eventos 
							var calendarioSubmissaoInicial = "#prazo_submissao_inicial";
							var calendarioSubmissaoFinal = "#prazo_submissao_final";
							var calendarioRevisaoInicial = "#prazo_revisao_inicial";
							var calendarioRevisaoFinal = "#prazo_revisao_final";

							function habilitarCalendario(calendario) {
								$(calendario).removeAttr("disabled");
							}

							function desabilitarCalendario(calendario) {
								$(calendario).attr("disabled", true);
								$(calendario).pickadate("clear");
							}

							function definirDataMinimaCalendario(calendario,
									dataMin) {
								var picker = getPicker(calendario);
								picker.set("min", dataMin);
							}

							function getPicker(idCalendario) {
								var $input = $(idCalendario).pickadate();
								var picker = $input.pickadate("picker");
								return picker;
							}

							function configurarCalendario(idCalendarioInicial,
									idCalendarioFinal) {
								var picker = getPicker(idCalendarioInicial);
								var dataAtual = picker.get();
								var umDia = 1;

								var dataMinima = new Date(dataAtual);
								dataMinima
										.setDate(dataMinima.getDate() + umDia);

								if (dataAtual.length == 0) {
									desabilitarCalendario(idCalendarioFinal);
								} else {
									habilitarCalendario(idCalendarioFinal);

									definirDataMinimaCalendario(
											idCalendarioFinal, dataMinima);
								}
							}

							$(calendarioSubmissaoInicial).on(
									"change",
									function() {
										configurarCalendario(
												calendarioSubmissaoInicial,
												calendarioSubmissaoFinal);
									});

							$(calendarioSubmissaoFinal).on(
									"change",
									function() {
										configurarCalendario(
												calendarioSubmissaoFinal,
												calendarioRevisaoInicial);
									});

							$(calendarioRevisaoInicial).on(
									"change",
									function() {
										configurarCalendario(
												calendarioRevisaoInicial,
												calendarioRevisaoFinal);
									});

							//Inicialização do Modal excluir Evento
							$('.modal-trigger').leanModal();

						});
		//Inicialização do Jpages para realizar a paginação
        $("div.holder").jPages({
        	containerID : "itemContainer",
        	perPage: 3
        });
	</script>
</body>
</html>
