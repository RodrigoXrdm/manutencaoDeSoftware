<!DOCTYPE html>
<html>
<head>
<div th:include="fragments/head :: head"></div>
<link th:href="@{/css/jPages.css}" type="text/css" rel="stylesheet"
	media="screen,projection" />
</head>
<body>
	<div th:include="fragments/header :: header"></div>
	<div class="container page">
		<br />
		<div
			th:include="fragments/organizador_menu_navegacao :: organizador_menu_navegacao"></div>
		<div class="row">
			<h2 th:text="${evento.nome}"></h2>
			<h3 th:if="${#lists.isEmpty(trabalhos)}">N√£o existem Trabalhos</h3>

			<div>
				<form>
					<div class="input-field col s12">
						<select name="filtrar_trabalhos" id="filtro">
							<option value="todos" selected="selected">Todos</option>
							<option value="nao_revisado">N√£o revisado</option>
							<option value="best">Best paper</option>
							<th:block th:each="opcao : ${opcoesFiltro}">
								<option th:value="${#strings.toLowerCase(opcao)}"
									th:text="${opcao.tipo}"></option>
							</th:block>
						</select> <label>Filtrar por status:</label>
					</div>
				</form>
				<div th:unless="${#lists.isEmpty(trabalhos)}"
					class="row holder center"></div>
				<div class="col s12">
					<div class="col s12" th:each="trabalho,count : ${trabalhos}"
						th:with="revisado=${trabalho.isRevisado()}, status=${trabalho.status}, best=${trabalho.isIndicadoMelhoresTrabalhos()}">
						<div class="card horizontal"
							th:attr="revisado=${revisado}, best=${best}"
							th:classappend="${status} ? ${#strings.toLowerCase(status)}">


							<div class="card-stacked">
								<div>
									<div class="card-content">
										<span class="card-title" th:text="${trabalho.titulo}"></span>
										<p>
											<b>Trilha : </b> <span th:text="${trabalho.trilha.nome}"></span>
										</p>
										<div
											th:include="fragments/listar_participacoes :: listar-inline('Autor(es):', ${trabalho.autoresDoTrabalho})"></div>
										<div
											th:include="fragments/listar_participacoes :: listar-inline('Revisor(es):', ${trabalho.revisores})">
										</div>

										<div>
											<a th:href="@{|/autor/file/${trabalho.id}|}"
												class="teal-text confirmar modal-trigger">Fazer Download
												do Arquivo </a>
										</div>
									</div>

									<div class="card-action">
										<div class="chip  yellow lighten-1" th:if="${best}">
											<i class="fa fa-star" aria-hidden="true"></i> <em>Best
												Paper</em>
										</div>

										<div th:if="${#strings.equals(trabalho.status, 'REPROVADO')}"
											class="chip red">
											<i class="fa fa-thumbs-down" aria-hidden="true"></i>
											Reprovado
										</div>
										<div th:if="${#strings.equals(trabalho.status, 'APROVADO')}"
											class="chip light-blue accent-2">
											<i class="fa fa-thumbs-up" aria-hidden="true"></i> Aprovado
										</div>
										<div th:if="${#strings.equals(trabalho.status, 'MODERACAO')}"
											class="chip orange lighten-3">
											<i class="fa fa-thumbs-up" aria-hidden="true"></i> Moderado

											<div>
												<a href="#modalStatus" data-target="modalLogin"
													class="btn waves-effect waves-light modal-trigger">Decidir
													Status</a>
											</div>
										</div>
										<div class="chip light-green accent-2" th:if="${revisado}">
											<i class="fa fa-check-circle" aria-hidden="true"></i>
											Revisado

										</div>
										<div class="chip orange lighten-2" th:unless="${revisado}">
											<i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
											N„o revisado
										</div>

									</div>
								</div>
							</div>

						</div>
					</div>

				</div>
			</div>
		</div>
		<div th:unless="${#lists.isEmpty(trabalhos)}"
			class="row holder center"></div>
	</div>
	<div id="modalStatus" class="modal">
		<div class="modal-content">
			<h4>Status</h4>
			<form class="col s12" th:action="@{/usuario/logar}" method="post">
				<div class="row">
					<div class="input-field col s12">
						
						<select name="funcao" required="required">
										<option value="APROVADO">APROVADO</option>
										<option value="REPROVADO">REPROVADO</option>
										<option value="RESSALVAS">APROVADO COM RESSALVAS</option>
									</select>
					</div>
				</div>
				<div class="modal-footer">


					<a class=" modal-action modal-close btn waves-effect waves-light red">Cancelar</a>

					<button class="left btn waves-effect waves-light" type="submit"	name="action">Aplicar status</button>

				</div>
			</form>

		</div>

	</div>
	<div th:include="fragments/footer :: footer"></div>
	<script type="text/javascript" th:src="@{/js/jPages.min.js}"></script>
	<script type="text/javascript" th:src="@{/js/modernizr.js}"></script>
	<script type="text/javascript" th:src="@{/js/timeline.main.js}"></script>
	<script type="text/javascript"
		th:src="@{/js/filtro_listar_trabalhos.js}"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			$('select').material_select();

			//Inicializa√ß√£o do Modal excluir Evento
			$('.modal-trigger').leanModal();

			$('.dropdown-button').dropdown({
				inDuration : 300,
				outDuration : 225,
				constrain_width : false, // Does not change width of dropdown to that of the activator
				hover : true, // Activate on hover
				gutter : 0, // Spacing from edge
				belowOrigin : false, // Displays dropdown below the button
				alignment : 'left' // Displays dropdown with edge aligned to the left of button
			});

		});
	</script>
</body>
</html>